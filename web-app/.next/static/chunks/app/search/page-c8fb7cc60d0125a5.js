(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{5216:function(e,t,i){Promise.resolve().then(i.bind(i,2474))},2474:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var l=i(7821),a=i(8078),s=i(5903),r=i(8771),n=i(4543),o=i(6702),d=i(5466);let c=a.forwardRef(function({title:e,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}),u=e=>fetch(e).then(e=>e.json());function m(){let{data:e,mutate:t}=(0,r.ZP)("/api/plugs",u),{data:i}=(0,r.ZP)("/api/settings",u),{data:m}=(0,r.ZP)("/api/locations",u),[p,h]=(0,a.useState)(""),[v,x]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[b,f]=(0,a.useState)({delivery:!1,shipping:!1,meetup:!1}),[w,j]=(0,a.useState)(null),[N,C]=(0,a.useState)(!1),[D,k]=(0,a.useState)([]),[E,L]=(0,a.useState)(!1),[S,A]=(0,a.useState)([]),[P,Z]=(0,a.useState)([]),_=v||g||b.delivery||b.shipping||b.meetup;return(0,a.useEffect)(()=>{if(e){let t=new Set;e.forEach(e=>{e.country&&t.add(e.country),e.countries&&e.countries.forEach(e=>t.add(e)),e.shippingCountries&&e.shippingCountries.forEach(e=>t.add(e))}),A(Array.from(t).map(e=>{var t;let l=null==i?void 0:null===(t=i.countries)||void 0===t?void 0:t.find(t=>t.code===e);return{code:e,name:(null==l?void 0:l.name)||e,flag:(null==l?void 0:l.flag)||""}}).sort((e,t)=>e.name.localeCompare(t.name)));let l=new Set;e.forEach(e=>{if(v){var t,i;if(!(e.country===v||(null===(t=e.countries)||void 0===t?void 0:t.includes(v))||(null===(i=e.shippingCountries)||void 0===i?void 0:i.includes(v))))return}b.delivery||b.shipping||b.meetup?(b.delivery&&e.deliveryDepartments&&e.deliveryDepartments.forEach(e=>l.add(e)),b.meetup&&e.meetupDepartments&&e.meetupDepartments.forEach(e=>l.add(e))):(e.deliveryDepartments&&e.deliveryDepartments.forEach(e=>l.add(e)),e.meetupDepartments&&e.meetupDepartments.forEach(e=>l.add(e)),e.department&&l.add(e.department))}),Z(Array.from(l).sort());let a=e;if(p){let e=p.toLowerCase();a=a.filter(t=>{var l,a,s,r,n,o,d,c,u,m,h,v,x,g,y,b;if((null===(l=t.name)||void 0===l?void 0:l.toLowerCase().includes(e))||(null===(a=t.description)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.countries)||void 0===s?void 0:s.some(t=>{var l;let a=null==i?void 0:null===(l=i.countries)||void 0===l?void 0:l.find(e=>e.code===t);return((null==a?void 0:a.name)||t).toLowerCase().includes(e)||t.toLowerCase().includes(e)}))||(null===(r=t.country)||void 0===r?void 0:r.toLowerCase().includes(e)))return!0;let f=null==i?void 0:null===(n=i.countries)||void 0===n?void 0:n.find(e=>e.code===t.country);return!!((null==f?void 0:null===(o=f.name)||void 0===o?void 0:o.toLowerCase().includes(e))||(null===(d=t.deliveryDepartments)||void 0===d?void 0:d.some(t=>t.toLowerCase().includes(e)))||(null===(c=t.meetupDepartments)||void 0===c?void 0:c.some(t=>t.toLowerCase().includes(e)))||(null===(u=t.deliveryPostalCodes)||void 0===u?void 0:u.some(e=>e.includes(p)))||(null===(m=t.meetupPostalCodes)||void 0===m?void 0:m.some(e=>e.includes(p)))||(null===(h=t.department)||void 0===h?void 0:h.toLowerCase().includes(e))||(null===(x=t.location)||void 0===x?void 0:null===(v=x.department)||void 0===v?void 0:v.toLowerCase().includes(e))||(null===(g=t.postalCode)||void 0===g?void 0:g.includes(p))||(null===(b=t.location)||void 0===b?void 0:null===(y=b.postalCode)||void 0===y?void 0:y.includes(p)))})}v&&(a=a.filter(e=>{var t,i,l;return!!((null===(t=e.countries)||void 0===t?void 0:t.includes(v))||(null===(i=e.shippingCountries)||void 0===i?void 0:i.includes(v)))||e.country===v||(null===(l=e.location)||void 0===l?void 0:l.country)===v})),g&&(a=a.filter(e=>{var t,i;return!!(e.department===g||(null===(t=e.deliveryDepartments)||void 0===t?void 0:t.includes(g))||(null===(i=e.meetupDepartments)||void 0===i?void 0:i.includes(g)))})),(b.delivery||b.shipping||b.meetup)&&(a=a.filter(e=>{var t,i,l;return(!b.delivery||null!==(t=e.methods)&&void 0!==t&&!!t.delivery)&&(!b.shipping||null!==(i=e.methods)&&void 0!==i&&!!i.shipping)&&(!b.meetup||null!==(l=e.methods)&&void 0!==l&&!!l.meetup)})),k(a)}},[e,p,v,g,b,i]),(0,l.jsxs)("div",{className:"min-h-screen pt-20 px-4",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)(s.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-4xl md:text-6xl font-black mb-4",children:(0,l.jsx)("span",{className:"gradient-text",children:"Recherche avanc\xe9e"})}),(0,l.jsx)("p",{className:"text-gray-400 text-lg",children:"Trouvez le plug parfait selon vos crit\xe8res"})]}),(0,l.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-3xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(d.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Rechercher par nom, ville, d\xe9partement ou code postal...",value:p,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full text-white placeholder-gray-400 focus:outline-none focus:border-primary transition-all"})]}),(0,l.jsxs)("button",{onClick:()=>L(!E),className:"p-4 rounded-full transition-all group flex-shrink-0 ".concat(E?"bg-primary text-white shadow-lg shadow-primary/30 scale-110":_?"bg-blue-600 text-white shadow-lg hover:bg-blue-700 border-2 border-blue-400":"bg-white/20 hover:bg-white/30 text-white border border-white/30 hover:scale-105"),title:_?"Filtres actifs":"Filtres avanc\xe9s",children:[(0,l.jsx)(c,{className:"w-6 h-6 ".concat(E?"rotate-180":""," transition-transform duration-300")}),_&&!E&&(0,l.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})]})}),E&&(0,l.jsxs)(s.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"glass-card p-6 mb-8 max-w-2xl mx-auto",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4 text-white",children:"Filtres avanc\xe9s"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Pays"}),(0,l.jsxs)("select",{value:v,onChange:e=>{x(e.target.value),y("")},className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-primary",children:[(0,l.jsx)("option",{value:"",className:"bg-gray-900 text-white",children:"Tous les pays"}),S.map(e=>(0,l.jsxs)("option",{value:e.code,className:"bg-gray-900 text-white",children:[e.flag," ",e.name]},e.code))]})]}),v&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"D\xe9partement"}),(0,l.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-primary",children:[(0,l.jsx)("option",{value:"",className:"bg-gray-900 text-white",children:"Tous les d\xe9partements"}),P.map(e=>(0,l.jsx)("option",{value:e,className:"bg-gray-900 text-white",children:e},e))]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"M\xe9thodes"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:b.delivery,onChange:e=>f({...b,delivery:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-primary focus:ring-primary"}),(0,l.jsx)("span",{className:"text-white",children:"\uD83D\uDE9A Livraison"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:b.shipping,onChange:e=>f({...b,shipping:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-secondary focus:ring-secondary"}),(0,l.jsx)("span",{className:"text-white",children:"\uD83D\uDCEE Envoi postal"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:b.meetup,onChange:e=>f({...b,meetup:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-accent focus:ring-accent"}),(0,l.jsx)("span",{className:"text-white",children:"\uD83E\uDD1D Meetup"})]})]})]}),(0,l.jsx)("button",{onClick:()=>{x(""),y(""),f({delivery:!1,shipping:!1,meetup:!1})},className:"w-full py-3 bg-white/10 hover:bg-white/20 rounded-lg font-medium transition-all text-white",children:"R\xe9initialiser les filtres"})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("p",{className:"text-gray-400",children:[D.length," r\xe9sultat",D.length>1?"s":""," trouv\xe9",D.length>1?"s":""]})}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-4 md:gap-6 lg:gap-8 max-w-6xl mx-auto",children:D.map((e,t)=>(0,l.jsx)(s.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,l.jsx)(n.Z,{plug:e,onClick:()=>{j(e),C(!0)}})},e._id))}),0===D.length&&(0,l.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,l.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-300",children:"Aucun r\xe9sultat trouv\xe9"}),(0,l.jsx)("p",{className:"text-gray-400 mb-4",children:"Aucun plug ne correspond \xe0 vos crit\xe8res de recherche."}),p&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Essayez avec d'autres mots-cl\xe9s, une ville diff\xe9rente ou un autre d\xe9partement."}),(v||g||Object.values(b).some(e=>e))&&(0,l.jsx)("button",{onClick:()=>{h(""),x(""),y(""),f({delivery:!1,shipping:!1,meetup:!1})},className:"mt-4 px-6 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-full transition-all",children:"R\xe9initialiser tous les filtres"})]})})]}),(0,l.jsx)(o.Z,{plug:w,isOpen:N,onClose:()=>{C(!1),j(null)}})]})}}},function(e){e.O(0,[921,532,566,115,141,744],function(){return e(e.s=5216)}),_N_E=e.O()}]);
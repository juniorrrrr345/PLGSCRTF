"use strict";(()=>{var e={};e.id=940,e.ids=[940],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},18568:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>k,originalPathname:()=>b,patchFetch:()=>h,requestAsyncStorage:()=>S,routeModule:()=>p,serverHooks:()=>I,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>v});var r={};n.r(r),n.d(r,{GET:()=>c,POST:()=>d,maxDuration:()=>m,runtime:()=>l});var a=n(6170),o=n(8533),i=n(54387),g=n(40064),s=n(30611),u=n(94208);let l="nodejs",m=60;async function c(){try{await (0,s.v)();let e=await u.Z.findOne();if(!e)return g.Z.json({backgroundImage:null,logoImage:null});return g.Z.json({backgroundImage:e.backgroundImage,logoImage:e.logoImage})}catch(e){return console.error("Background GET error:",e),g.Z.json({error:"Erreur serveur"},{status:500})}}async function d(e){try{let t=await e.json();await (0,s.v)();let n=await u.Z.findOne();return n||(n=new u.Z),void 0!==t.backgroundImage&&(n.backgroundImage=t.backgroundImage),void 0!==t.logoImage&&(n.logoImage=t.logoImage),await n.save(),g.Z.json({backgroundImage:n.backgroundImage,logoImage:n.logoImage})}catch(e){return console.error("Background POST error:",e),g.Z.json({error:"Erreur serveur"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/settings/background/route",pathname:"/api/settings/background",filename:"route",bundlePath:"app/api/settings/background/route"},resolvedPagePath:"/workspace/web-app/app/api/settings/background/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:S,staticGenerationAsyncStorage:f,serverHooks:I,headerHooks:k,staticGenerationBailout:v}=p,b="/api/settings/background/route";function h(){return(0,i.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:f})}},30611:(e,t,n)=>{n.d(t,{v:()=>g});var r=n(11185),a=n.n(r);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable");let i=global.mongoose||{conn:null,promise:null};async function g(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(o,{bufferCommands:!1}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}global.mongoose||(global.mongoose=i)},94208:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(11185),a=n.n(r);let o=new(a()).Schema({welcomeMessage:{type:String,default:"\uD83D\uDD0C Bienvenue sur CERTIF2PLUG !\n\nLa marketplace exclusive des vendeurs certifi\xe9s."},welcomeImage:{type:String,default:""},infoText:{type:String,default:"Informations sur notre service"},miniAppButtonText:{type:String,default:"\uD83D\uDD0C MINI APP CERTIF2PLUG"},backgroundImage:{type:String,default:""},logoImage:{type:String,default:""},socialNetworks:{snap:String,instagram:String,whatsapp:String,signal:String,threema:String,potato:String,telegram:String,other:String},botSocialNetworks:[{name:String,url:String,emoji:String,order:{type:Number,default:0}}],shopSocialNetworks:[{id:String,name:String,emoji:String,link:String}],countries:[{code:String,name:String,flag:String,departments:[{code:String,name:String}]}],departments:[{country:String,code:String,name:String}],postalCodes:[{code:String,city:String,department:String}],telegramChannelLink:{type:String,default:"https://t.me/+RoI-Xzh-ma9iYmY0"},telegramChannelId:{type:String,default:"-1002736254394"},maintenanceMode:{type:Boolean,default:!1},maintenanceEndTime:{type:Date,default:null},maintenanceBackgroundImage:{type:String,default:""},maintenanceLogo:{type:String,default:""}},{timestamps:!0}),i=a().models.Settings||a().model("Settings",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[864,386],()=>n(18568));module.exports=r})();
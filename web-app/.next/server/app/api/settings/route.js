"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},102:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>f,originalPathname:()=>k,patchFetch:()=>I,requestAsyncStorage:()=>S,routeModule:()=>p,serverHooks:()=>w,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>h});var a={};n.r(a),n.d(a,{GET:()=>d,POST:()=>u,maxDuration:()=>c,runtime:()=>m});var o=n(6170),i=n(8533),r=n(54387),s=n(40064),g=n(30611),l=n(94208);let m="nodejs",c=60;async function d(){try{await (0,g.v)();let e=await l.Z.findOne();return e||(e=new l.Z,await e.save()),s.Z.json(e)}catch(e){return console.error("Error fetching settings:",e),s.Z.json({error:"Failed to fetch settings"},{status:500})}}async function u(e){try{await (0,g.v)();let t=await e.json(),n=await l.Z.findOne();return n||(n=new l.Z),void 0!==t.welcomeMessage&&(n.welcomeMessage=t.welcomeMessage),void 0!==t.welcomeImage&&(n.welcomeImage=t.welcomeImage),void 0!==t.infoText&&(n.infoText=t.infoText),void 0!==t.miniAppButtonText&&(n.miniAppButtonText=t.miniAppButtonText),void 0!==t.backgroundImage&&(n.backgroundImage=t.backgroundImage),void 0!==t.socialNetworks&&(n.socialNetworks=t.socialNetworks),void 0!==t.botSocialNetworks&&(n.botSocialNetworks=t.botSocialNetworks),void 0!==t.shopSocialNetworks&&(n.shopSocialNetworks=t.shopSocialNetworks),void 0!==t.countries&&(n.countries=t.countries),void 0!==t.postalCodes&&(n.postalCodes=t.postalCodes),void 0!==t.telegramChannelLink&&(n.telegramChannelLink=t.telegramChannelLink),void 0!==t.telegramChannelId&&(n.telegramChannelId=t.telegramChannelId),void 0!==t.maintenanceMode&&(n.maintenanceMode=t.maintenanceMode),void 0!==t.maintenanceBackgroundImage&&(n.maintenanceBackgroundImage=t.maintenanceBackgroundImage),void 0!==t.maintenanceLogo&&(n.maintenanceLogo=t.maintenanceLogo),void 0!==t.maintenanceEndTime&&(n.maintenanceEndTime=t.maintenanceEndTime),await n.save(),s.Z.json(n)}catch(e){return console.error("Error updating settings:",e),s.Z.json({error:"Failed to update settings"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"/workspace/web-app/app/api/settings/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:S,staticGenerationAsyncStorage:v,serverHooks:w,headerHooks:f,staticGenerationBailout:h}=p,k="/api/settings/route";function I(){return(0,r.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:v})}},30611:(e,t,n)=>{n.d(t,{v:()=>s});var a=n(11185),o=n.n(a);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable");let r=global.mongoose||{conn:null,promise:null};async function s(){if(r.conn)return r.conn;r.promise||(r.promise=o().connect(i,{bufferCommands:!1}));try{r.conn=await r.promise}catch(e){throw r.promise=null,e}return r.conn}global.mongoose||(global.mongoose=r)},94208:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(11185),o=n.n(a);let i=new(o()).Schema({welcomeMessage:{type:String,default:"\uD83D\uDD0C Bienvenue sur CERTIF2PLUG !\n\nLa marketplace exclusive des vendeurs certifi\xe9s."},welcomeImage:{type:String,default:""},infoText:{type:String,default:"Informations sur notre service"},miniAppButtonText:{type:String,default:"\uD83D\uDD0C MINI APP CERTIF2PLUG"},backgroundImage:{type:String,default:""},logoImage:{type:String,default:""},socialNetworks:{snap:String,instagram:String,whatsapp:String,signal:String,threema:String,potato:String,telegram:String,other:String},botSocialNetworks:[{name:String,url:String,emoji:String,order:{type:Number,default:0}}],shopSocialNetworks:[{id:String,name:String,emoji:String,link:String}],countries:[{code:String,name:String,flag:String,departments:[{code:String,name:String}]}],departments:[{country:String,code:String,name:String}],postalCodes:[{code:String,city:String,department:String}],telegramChannelLink:{type:String,default:"https://t.me/+RoI-Xzh-ma9iYmY0"},telegramChannelId:{type:String,default:"-1002736254394"},maintenanceMode:{type:Boolean,default:!1},maintenanceEndTime:{type:Date,default:null},maintenanceBackgroundImage:{type:String,default:""},maintenanceLogo:{type:String,default:""}},{timestamps:!0}),r=o().models.Settings||o().model("Settings",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[864,386],()=>n(102));module.exports=a})();
"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90847:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>h,originalPathname:()=>S,patchFetch:()=>v,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>y});var r={};o.r(r),o.d(r,{GET:()=>c});var n=o(6170),a=o(8533),i=o(54387),s=o(40064),p=o(30611),l=o(26760);async function c(){try{await (0,p.v)(),console.log("Fetching vendor applications...");let e=await l.Z.find().sort({createdAt:-1}).limit(100).lean();console.log(`Found ${e.length} applications`);let t=e.map(e=>({...e,country:e.country||e.location?.country||"",department:e.department||e.location?.department||"",postalCode:e.postalCode||e.location?.postalCode||"",photo:e.photo||e.shopPhoto||null,socialNetworks:{primary:e.socialNetworks?.primary||[],links:e.socialNetworks?.links||{},others:e.socialNetworks?.others||""},methods:e.methods||{}}));return s.Z.json(t)}catch(e){return console.error("Applications API error:",e),s.Z.json({error:"Failed to fetch applications"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/applications/route",pathname:"/api/applications",filename:"route",bundlePath:"app/api/applications/route"},resolvedPagePath:"/workspace/web-app/app/api/applications/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:h,staticGenerationBailout:y}=d,S="/api/applications/route";function v(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},30611:(e,t,o)=>{o.d(t,{v:()=>s});var r=o(11185),n=o.n(r);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable");let i=global.mongoose||{conn:null,promise:null};async function s(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(a,{bufferCommands:!1}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}global.mongoose||(global.mongoose=i)},26760:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(11185),n=o.n(r);let a=new(n()).Schema({userId:{type:n().Schema.Types.ObjectId,ref:"User",required:!0},telegramId:{type:Number,required:!0},username:String,socialNetworks:{primary:[String],links:{type:Map,of:String},others:String},methods:{delivery:Boolean,shipping:Boolean,meetup:Boolean},deliveryZones:String,shippingZones:String,meetupZones:String,country:String,department:String,postalCode:String,photo:String,description:String,location:{country:String,department:String,postalCode:String},shopPhoto:String,status:{type:String,enum:["pending","approved","rejected"],default:"pending"},createdAt:{type:Date,default:Date.now},submittedAt:{type:Date,default:Date.now},reviewedAt:Date,reviewedBy:String}),i=n().models.VendorApplication||n().model("VendorApplication",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[864,386],()=>o(90847));module.exports=r})();
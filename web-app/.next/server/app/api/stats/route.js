"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49317:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>S,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>h});var n={};r.r(n),r.d(n,{GET:()=>d});var a=r(6170),o=r(8533),i=r(54387),s=r(40064),l=r(30611),p=r(24282),u=r(11027);async function d(){try{await (0,l.v)();let e=await p.Z.countDocuments(),t=await u.Z.countDocuments();return s.Z.json({userCount:e,plugCount:t},{headers:{"Cache-Control":"no-store, no-cache, must-revalidate",Pragma:"no-cache",Expires:"0"}})}catch(e){return console.error("Stats API error:",e),s.Z.json({error:"Failed to fetch stats"},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/stats/route",pathname:"/api/stats",filename:"route",bundlePath:"app/api/stats/route"},resolvedPagePath:"/workspace/web-app/app/api/stats/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:S,headerHooks:y,staticGenerationBailout:h}=g,f="/api/stats/route";function v(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:c})}},30611:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(11185),a=r.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable");let i=global.mongoose||{conn:null,promise:null};async function s(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(o,{bufferCommands:!1}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}global.mongoose||(global.mongoose=i)},11027:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(11185),a=r.n(n);let o=new(a()).Schema({name:{type:String,required:!0},photo:String,description:String,methods:{delivery:{type:Boolean,default:!1},shipping:{type:Boolean,default:!1},meetup:{type:Boolean,default:!1}},deliveryDepartments:[{type:String}],deliveryPostalCodes:[{type:String}],meetupDepartments:[{type:String}],meetupPostalCodes:[{type:String}],socialNetworks:{snap:String,instagram:String,whatsapp:String,signal:String,threema:String,potato:String,telegram:String,other:String},customNetworks:[{id:String,name:String,emoji:String,link:String}],location:{country:String,department:String,postalCode:String},countries:[{type:String}],shippingCountries:[{type:String}],country:String,countryFlag:String,department:String,postalCode:String,likes:{type:Number,default:0},referralCount:{type:Number,default:0},referralLink:String,isActive:{type:Boolean,default:!0},isExample:{type:Boolean,default:!1}},{timestamps:!0});o.index({likes:-1}),o.index({referralCount:-1});let i=a().models.Plug||a().model("Plug",o)},24282:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(11185),a=r.n(n);let o=new(a()).Schema({telegramId:{type:String,required:!0,unique:!0},username:String,firstName:String,lastName:String,referredBy:{type:a().Schema.Types.ObjectId,ref:"Plug"},hasBeenCountedAsReferral:{type:Boolean,default:!1},lastLikeAt:Date,likedPlugs:[{plugId:{type:a().Schema.Types.ObjectId,ref:"Plug"},likedAt:Date}],joinedAt:{type:Date,default:Date.now},isAdmin:{type:Boolean,default:!1}}),i=a().models.User||a().model("User",o)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[864,386],()=>r(49317));module.exports=n})();
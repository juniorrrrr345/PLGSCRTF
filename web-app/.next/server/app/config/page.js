(()=>{var e={};e.id=671,e.ids=[671],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86878:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=a(7),r=a(8533),l=a(29377),n=a.n(l),i=a(29799),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["config",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,968)),"/workspace/web-app/app/config/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,35978)),"/workspace/web-app/app/layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,95046)),"/workspace/web-app/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,73472,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/web-app/app/config/page.tsx"],u="/config/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/config/page",pathname:"/config",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},59070:(e,t,a)=>{Promise.resolve().then(a.bind(a,50201))},50201:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var s=a(54714),r=a(77580),l=a(7297),n=a(9427),i=a(88934),o=a(15082),d=a(72218),c=a(86657);let u=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset","ml_default");let a=e.type.startsWith("video/"),s=await fetch(`https://api.cloudinary.com/v1_1/demo/${a?"video":"image"}/upload`,{method:"POST",body:t}),r=await s.json();if(!s.ok)throw Error(r.error?.message||"Demo upload failed");return r.secure_url},m=async e=>{try{try{return await u(e)}catch(e){console.log("Demo upload failed, trying main account...")}let t="dg1cfd3ld",a=new FormData;a.append("file",e),a.append("upload_preset","ml_default"),a.append("cloud_name",t),console.log("Starting upload...",{fileName:e.name,fileSize:e.size,fileType:e.type});let s=e.type.startsWith("video/"),r=await fetch(`https://api.cloudinary.com/v1_1/${t}/${s?"video":"image"}/upload`,{method:"POST",body:a}),l=await r.json();if(!r.ok){if(console.error("Cloudinary error:",l),l.error?.message?.includes("preset"))throw Error("Configuration Cloudinary requise. Voir CLOUDINARY_SETUP.md");throw Error(l.error?.message||"Erreur upload")}return console.log("Upload successful!",l.secure_url),l.secure_url}catch(t){if(console.error("Upload failed:",t),t.message?.includes("preset"))return console.log("Trying alternative upload method..."),x(e);throw t}},x=async e=>{try{let t=await h(e),a=new FormData;a.append("file",t),a.append("upload_preset","unsigned");let s=e.type.startsWith("video/"),r=await fetch(`https://api.cloudinary.com/v1_1/dg1cfd3ld/${s?"video":"image"}/upload`,{method:"POST",body:a});if(!r.ok)return p(e);return(await r.json()).secure_url}catch(t){return console.error("Alternative upload failed:",t),p(e)}},p=async e=>{let t=await h(e),a=await fetch("https://api.cloudinary.com/v1_1/dtjab1akq/image/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,upload_preset:"ml_default"})});if(!a.ok)throw Error("Upload impossible. V\xe9rifiez votre connexion internet.");return(await a.json()).secure_url},h=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),g=[{cloud_name:"demo",upload_preset:"ml_default",description:"Cloudinary Demo Account"},{cloud_name:"practicaldev",upload_preset:"sxhvhwgu",description:"Dev.to Public Cloudinary"},{cloud_name:"dx0pryfzn",upload_preset:"y5cibxmx",description:"Public Cloudinary Instance"}],b=async e=>{let t=e.type.startsWith("video/")?"video":"image";for(let a of g)try{console.log(`Trying upload with ${a.description}...`);let s=new FormData;s.append("file",e),s.append("upload_preset",a.upload_preset);let r=await fetch(`https://api.cloudinary.com/v1_1/${a.cloud_name}/${t}/upload`,{method:"POST",body:s}),l=await r.json();if(r.ok&&l.secure_url)return console.log(`Upload successful with ${a.description}`),l.secure_url}catch(e){console.log(`Failed with ${a.description}, trying next...`)}throw Error("Tous les services d'upload ont \xe9chou\xe9")},j=async e=>{console.log("[Upload] Starting image upload...",{fileName:e.name,fileSize:e.size,fileType:e.type});let t=e.type.startsWith("image/"),a=e.type.startsWith("video/");if(!t&&!a)throw Error("Le fichier doit \xeatre une image ou une vid\xe9o");try{let t=await m(e);return console.log("[Upload] Success! URL:",t),t}catch(t){console.error("[Upload] Cloudinary error:",t);try{console.log("[Upload] Trying fallback configurations...");let t=await b(e);return console.log("[Upload] Fallback success! URL:",t),t}catch(e){console.error("[Upload] Fallback error:",e)}try{let t=new FormData;t.append("file",e);let a=await fetch("/api/upload",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw Error(s.error||`Erreur upload: ${a.status}`);return s.url}catch(e){if(console.error("[Upload] API error:",e),t instanceof Error)throw t;throw Error("Erreur lors de l'upload. Veuillez r\xe9essayer.")}}},y=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}),f=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});function v({onUpload:e,currentImage:t,label:a="Choisir une image"}){let[l,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(t||null),[c,u]=(0,r.useState)(0),m=async a=>{let s=a.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")){o.default.error("Veuillez s\xe9lectionner une image");return}let r=new FileReader;r.onloadend=()=>{d(r.result)},r.readAsDataURL(s),n(!0),u(10);let l=null;try{l=setInterval(()=>{u(e=>e>=90?e:e>=70?e+2:e>=50?e+5:e+10)},500);let t=j(s),a=new Promise((e,t)=>setTimeout(()=>t(Error("Upload trop long. Veuillez r\xe9essayer.")),3e5)),r=await Promise.race([t,a]);l&&clearInterval(l),u(100),e(r),o.default.success("Image upload\xe9e avec succ\xe8s !"),setTimeout(()=>u(0),500)}catch(a){console.error("Upload error:",a),l&&clearInterval(l);let e="Erreur lors de l'upload";a.message?.includes("trop long")?e=a.message:a.message?.includes("Network")?e="Erreur de connexion. V\xe9rifiez votre internet.":a.message&&(e=a.message),o.default.error(e),d(t||null),u(0)}finally{n(!1),l&&clearInterval(l)}};return(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:a}),(0,s.jsxs)("div",{className:"relative",children:[i?(0,s.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-800 border-2 border-gray-700",children:[s.jsx("img",{src:i,alt:"Preview",className:"w-full h-48 object-cover"}),l&&(0,s.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center",children:[s.jsx(y,{className:"w-12 h-12 text-white mb-2 animate-pulse"}),s.jsx("div",{className:"w-48 bg-gray-700 rounded-full h-2 mb-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})}),(0,s.jsxs)("span",{className:"text-white text-sm",children:["Upload en cours... ",c,"%"]}),c>=90&&s.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Finalisation..."})]})]}):(0,s.jsxs)("label",{className:"border-2 border-dashed border-gray-700 rounded-lg p-8 text-center hover:border-gray-600 transition-colors cursor-pointer block",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:m,disabled:l,className:"hidden"}),s.jsx(f,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Cliquez ou glissez une image ici"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF"})]}),i&&!l&&(0,s.jsxs)("label",{className:"absolute inset-0 w-full h-full cursor-pointer group",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:m,disabled:l,className:"hidden"}),s.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium",children:"Changer l'image"})})]})]}),t&&!i&&s.jsx("p",{className:"text-xs text-gray-500",children:"Image actuelle sauvegard\xe9e"})]})}let N=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),w=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),D=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});function C({networks:e=[],onChange:t}){console.log("SocialNetworkManager - networks re\xe7us:",e);let[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)({name:"",emoji:"",link:""}),c=(a,s)=>{t(e.map(e=>e.id===a?{...e,...s}:e))},u=a=>{t(e.filter(e=>e.id!==a))};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"R\xe9seaux sociaux"}),!a&&(0,s.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all shadow-lg hover:shadow-xl",children:[s.jsx(N,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Ajouter"})]})]}),s.jsx("div",{className:"space-y-2",children:e.map(e=>s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3",children:n===e.id?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:e.emoji,onChange:t=>c(e.id,{emoji:t.target.value}),className:"w-14 h-14 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-center text-2xl",placeholder:"\uD83D\uDE00"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[s.jsx("input",{type:"text",value:e.name,onChange:t=>c(e.id,{name:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",placeholder:"Nom du r\xe9seau"}),s.jsx("input",{type:"text",value:e.link,onChange:t=>c(e.id,{link:t.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"@username ou lien"})]})]}),s.jsx("div",{className:"flex justify-end gap-2",children:s.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium",children:"Valider"})})]}):(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:e.emoji}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-medium text-white",children:e.name}),s.jsx("div",{className:"text-sm text-gray-400",children:e.link})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(e.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(w,{className:"w-5 h-5 text-gray-400"})}),s.jsx("button",{onClick:()=>u(e.id),className:"p-2 hover:bg-red-600/20 rounded-lg transition-colors",children:s.jsx(D,{className:"w-5 h-5 text-red-500"})})]})]})},e.id))}),a&&(0,s.jsxs)("div",{className:"bg-gray-800 border-2 border-blue-600 rounded-lg p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"1. Choisissez un emoji"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:o.emoji,onChange:e=>d({...o,emoji:e.target.value}),className:"w-16 h-16 px-2 py-2 bg-gray-700 border border-gray-600 rounded text-center text-3xl",placeholder:"\uD83D\uDE00"}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:["\uD83D\uDC7B","\uD83D\uDCF7","\uD83D\uDCAC","✈️","\uD83D\uDD12","\uD83D\uDD10","\uD83E\uDD54","\uD83C\uDFB5","\uD83D\uDCF1","\uD83D\uDCBB","\uD83C\uDF10","\uD83D\uDCE7"].map(e=>s.jsx("button",{onClick:()=>d({...o,emoji:e}),className:"text-2xl hover:bg-gray-700 p-2 rounded transition-colors",children:e},e))})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"2. Nom du r\xe9seau"}),s.jsx("input",{type:"text",value:o.name,onChange:e=>d({...o,name:e.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white text-base",placeholder:"Ex: Instagram, WhatsApp, Telegram..."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"3. Lien ou username"}),s.jsx("input",{type:"text",value:o.link,onChange:e=>d({...o,link:e.target.value}),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white text-base",placeholder:"Ex: @username, +33612345678, https://..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entrez un username, num\xe9ro de t\xe9l\xe9phone ou lien complet"})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{l(!1),d({name:"",emoji:"",link:""})},className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Annuler"}),s.jsx("button",{onClick:()=>{o.name&&o.emoji&&o.link&&(t([...e,{id:Date.now().toString(),...o}]),d({name:"",emoji:"",link:""}),l(!1))},disabled:!o.name||!o.emoji||!o.link,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Ajouter"})]})]})]})}let k={FR:{name:"France",flag:"\uD83C\uDDEB\uD83C\uDDF7",departments:["01 - Ain","02 - Aisne","03 - Allier","04 - Alpes-de-Haute-Provence","05 - Hautes-Alpes","06 - Alpes-Maritimes","07 - Ard\xe8che","08 - Ardennes","09 - Ari\xe8ge","10 - Aube","11 - Aude","12 - Aveyron","13 - Bouches-du-Rh\xf4ne","14 - Calvados","15 - Cantal","16 - Charente","17 - Charente-Maritime","18 - Cher","19 - Corr\xe8ze","21 - C\xf4te-d'Or","22 - C\xf4tes-d'Armor","23 - Creuse","24 - Dordogne","25 - Doubs","26 - Dr\xf4me","27 - Eure","28 - Eure-et-Loir","29 - Finist\xe8re","30 - Gard","31 - Haute-Garonne","32 - Gers","33 - Gironde","34 - H\xe9rault","35 - Ille-et-Vilaine","36 - Indre","37 - Indre-et-Loire","38 - Is\xe8re","39 - Jura","40 - Landes","41 - Loir-et-Cher","42 - Loire","43 - Haute-Loire","44 - Loire-Atlantique","45 - Loiret","46 - Lot","47 - Lot-et-Garonne","48 - Loz\xe8re","49 - Maine-et-Loire","50 - Manche","51 - Marne","52 - Haute-Marne","53 - Mayenne","54 - Meurthe-et-Moselle","55 - Meuse","56 - Morbihan","57 - Moselle","58 - Ni\xe8vre","59 - Nord","60 - Oise","61 - Orne","62 - Pas-de-Calais","63 - Puy-de-D\xf4me","64 - Pyr\xe9n\xe9es-Atlantiques","65 - Hautes-Pyr\xe9n\xe9es","66 - Pyr\xe9n\xe9es-Orientales","67 - Bas-Rhin","68 - Haut-Rhin","69 - Rh\xf4ne","70 - Haute-Sa\xf4ne","71 - Sa\xf4ne-et-Loire","72 - Sarthe","73 - Savoie","74 - Haute-Savoie","75 - Paris","76 - Seine-Maritime","77 - Seine-et-Marne","78 - Yvelines","79 - Deux-S\xe8vres","80 - Somme","81 - Tarn","82 - Tarn-et-Garonne","83 - Var","84 - Vaucluse","85 - Vend\xe9e","86 - Vienne","87 - Haute-Vienne","88 - Vosges","89 - Yonne","90 - Territoire de Belfort","91 - Essonne","92 - Hauts-de-Seine","93 - Seine-Saint-Denis","94 - Val-de-Marne","95 - Val-d'Oise"]},BE:{name:"Belgique",flag:"\uD83C\uDDE7\uD83C\uDDEA",departments:["Anvers","Brabant flamand","Brabant wallon","Bruxelles","Flandre-Occidentale","Flandre-Orientale","Hainaut","Li\xe8ge","Limbourg","Luxembourg","Namur"]},CH:{name:"Suisse",flag:"\uD83C\uDDE8\uD83C\uDDED",departments:["Argovie","Appenzell Rhodes-Ext\xe9rieures","Appenzell Rhodes-Int\xe9rieures","B\xe2le-Campagne","B\xe2le-Ville","Berne","Fribourg","Gen\xe8ve","Glaris","Grisons","Jura","Lucerne","Neuch\xe2tel","Nidwald","Obwald","Saint-Gall","Schaffhouse","Schwyz","Soleure","Tessin","Thurgovie","Uri","Valais","Vaud","Zoug","Zurich"]},CA:{name:"Canada",flag:"\uD83C\uDDE8\uD83C\uDDE6",departments:["Alberta","Colombie-Britannique","\xcele-du-Prince-\xc9douard","Manitoba","Nouveau-Brunswick","Nouvelle-\xc9cosse","Ontario","Qu\xe9bec","Saskatchewan","Terre-Neuve-et-Labrador"]},LU:{name:"Luxembourg",flag:"\uD83C\uDDF1\uD83C\uDDFA",departments:["Capellen","Clervaux","Diekirch","Echternach","Esch-sur-Alzette","Grevenmacher","Luxembourg","Mersch","Redange","Remich","Vianden","Wiltz"]},MA:{name:"Maroc",flag:"\uD83C\uDDF2\uD83C\uDDE6",departments:["Casablanca-Settat","Rabat-Sal\xe9-K\xe9nitra","Marrakech-Safi","F\xe8s-Mekn\xe8s","Tanger-T\xe9touan-Al Hoce\xefma","Oriental","B\xe9ni Mellal-Kh\xe9nifra","Dr\xe2a-Tafilalet","Souss-Massa","Guelmim-Oued Noun","La\xe2youne-Sakia El Hamra","Dakhla-Oued Ed-Dahab"]},US:{name:"\xc9tats-Unis",flag:"\uD83C\uDDFA\uD83C\uDDF8",departments:["Alabama","Alaska","Arizona","Arkansas","Californie","Caroline du Nord","Caroline du Sud","Colorado","Connecticut","Dakota du Nord","Dakota du Sud","Delaware","Floride","G\xe9orgie","Hawa\xef","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiane","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New York","Nouveau-Mexique","Ohio","Oklahoma","Oregon","Pennsylvanie","Rhode Island","Tennessee","Texas","Utah","Vermont","Virginie","Virginie-Occidentale","Washington","Wisconsin","Wyoming"]},DE:{name:"Allemagne",flag:"\uD83C\uDDE9\uD83C\uDDEA",departments:["Bade-Wurtemberg","Bavi\xe8re","Berlin","Brandebourg","Br\xeame","Hambourg","Hesse","Mecklembourg-Pom\xe9ranie-Occidentale","Basse-Saxe","Rh\xe9nanie-du-Nord-Westphalie","Rh\xe9nanie-Palatinat","Sarre","Saxe","Saxe-Anhalt","Schleswig-Holstein","Thuringe"]},ES:{name:"Espagne",flag:"\uD83C\uDDEA\uD83C\uDDF8",departments:["Andalousie","Aragon","Asturies","Bal\xe9ares","Canaries","Cantabrie","Castille-et-Le\xf3n","Castille-La Manche","Catalogne","Estr\xe9madure","Galice","La Rioja","Madrid","Murcie","Navarre","Pays basque","Valence"]},IT:{name:"Italie",flag:"\uD83C\uDDEE\uD83C\uDDF9",departments:["Abruzzes","Basilicate","Calabre","Campanie","\xc9milie-Romagne","Frioul-V\xe9n\xe9tie Julienne","Latium","Ligurie","Lombardie","Marches","Molise","Ombrie","Pi\xe9mont","Pouilles","Sardaigne","Sicile","Toscane","Trentin-Haut-Adige","Vall\xe9e d'Aoste","V\xe9n\xe9tie"]},PT:{name:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9",departments:["Aveiro","Beja","Braga","Bragance","Castelo Branco","Coimbra","\xc9vora","Faro","Guarda","Leiria","Lisbonne","Portalegre","Porto","Santar\xe9m","Set\xfabal","Viana do Castelo","Vila Real","Viseu","A\xe7ores","Mad\xe8re"]},NL:{name:"Pays-Bas",flag:"\uD83C\uDDF3\uD83C\uDDF1",departments:["Drenthe","Flevoland","Frise","Gueldre","Groningue","Hollande-M\xe9ridionale","Hollande-Septentrionale","Limbourg","Brabant-Septentrional","Overijssel","Utrecht","Z\xe9lande"]},GB:{name:"Royaume-Uni",flag:"\uD83C\uDDEC\uD83C\uDDE7",departments:["Londres","Birmingham","Manchester","Glasgow","Liverpool","Leeds","Sheffield","\xc9dimbourg","Bristol","Cardiff","Leicester","Coventry","Bradford","Belfast","Nottingham","Newcastle","Southampton","Portsmouth","York","Aberdeen"]}},E=e=>{let t=[];return e.forEach(e=>{let a=k[e];a&&t.push(...a.departments)}),t.sort()},S=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});function L({selectedCountries:e,selectedDepartments:t,onCountriesChange:a,onDepartmentsChange:l,showDepartments:n=!1}){let[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)("");(0,r.useEffect)(()=>{n&&e.length>0?o(E(e)):o([])},[e,n]);let u=t=>{e.includes(t)?a(e.filter(e=>e!==t)):a([...e,t])},m=e=>{t.includes(e)?l(t.filter(t=>t!==e)):l([...t,e])},x=d?i.filter(e=>e.toLowerCase().includes(d.toLowerCase())):i;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Pays disponibles"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(k).map(([t,a])=>(0,s.jsxs)("button",{type:"button",onClick:()=>u(t),className:`p-3 rounded-lg border-2 transition-all flex items-center gap-2 ${e.includes(t)?"border-blue-500 bg-blue-500/20 text-white":"border-gray-600 bg-gray-800 text-gray-300 hover:border-gray-500"}`,children:[s.jsx("span",{className:"text-xl",children:a.flag}),s.jsx("span",{className:"text-sm font-medium",children:a.name}),e.includes(t)&&s.jsx(S,{className:"w-4 h-4 ml-auto"})]},t))})]}),n&&i.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-gray-300",children:["D\xe9partements de livraison (",t.length,"/",i.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{l(i)},className:"text-xs px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Tout s\xe9lectionner"}),s.jsx("button",{type:"button",onClick:()=>{l([])},className:"text-xs px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded-lg",children:"Tout effacer"})]})]}),s.jsx("input",{type:"text",placeholder:"Rechercher un d\xe9partement...",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 mb-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"}),s.jsx("div",{className:"max-h-60 overflow-y-auto bg-gray-800 border border-gray-700 rounded-lg p-2",children:e.map(e=>{let a=k[e];if(!a)return null;let r=x.filter(e=>a.departments.includes(e));return 0===r.length?null:(0,s.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm font-semibold text-gray-400 sticky top-0 bg-gray-800 py-1",children:[s.jsx("span",{className:"text-lg",children:a.flag}),s.jsx("span",{children:a.name})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 pl-6",children:r.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-700 rounded cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t.includes(e),onChange:()=>m(e),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:e})]},e))})]},e)})})]})]})}var P=a(70312);function M({postalCodes:e=[],onChange:t,placeholder:a="Code postal"}){let[l,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),d=()=>{let a=l.trim();if(!a){o("Entrez un code postal");return}if(!/^\d{4,6}$/.test(a)){o("Format invalide (4-6 chiffres)");return}if(e.includes(a)){o("Code postal d\xe9j\xe0 ajout\xe9");return}t([...e,a]),n(""),o("")},c=a=>{t(e.filter(e=>e!==a))};return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("input",{type:"text",value:l,onChange:e=>{n(e.target.value),o("")},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),d())},placeholder:a,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg focus:border-primary focus:outline-none transition-colors"}),i&&s.jsx("p",{className:"text-red-400 text-xs mt-1",children:i})]}),(0,s.jsxs)("button",{type:"button",onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"Ajouter"]})]}),e.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-700 text-white rounded-full text-sm",children:[e,s.jsx("button",{type:"button",onClick:()=>c(e),className:"p-0.5 hover:bg-gray-600 rounded-full transition-colors",children:s.jsx(P.Z,{className:"w-3 h-3"})})]},e))}),0===e.length&&s.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun code postal ajout\xe9"})]})}function T({endTime:e}){let[t,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let t=()=>{let t=new Date().getTime(),s=new Date(e).getTime()-t;if(s<0){a("Maintenance termin\xe9e");return}a(`${Math.floor(s/864e5)}j ${Math.floor(s%864e5/36e5)}h ${Math.floor(s%36e5/6e4)}m ${Math.floor(s%6e4/1e3)}s`)};t();let s=setInterval(t,1e3);return()=>clearInterval(s)},[e]),(0,s.jsxs)("div",{className:"mt-4 p-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3 text-center",children:"⏱️ Temps restant"}),s.jsx("p",{className:"text-3xl font-mono font-bold text-white text-center drop-shadow-lg",children:t}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-3 text-center",children:["Fin pr\xe9vue : ",new Date(e).toLocaleString("fr-FR")]})]})}let A=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});var F=a(54073);let _=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}),B=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))});var O=a(32282);let R=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.867 19.125h.008v.008h-.008v-.008Z"}))}),I=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))});var z=a(50786);let U=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),Z=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}),$=e=>fetch(e).then(e=>e.json());function V(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)("dashboard"),[b,j]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),[k,E]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),[q,G]=(0,r.useState)(""),[W,J]=(0,r.useState)(""),[Y,K]=(0,r.useState)(""),[X,Q]=(0,r.useState)("MINI APP CERTIF2PLUG \uD83D\uDD0C"),[ee,et]=(0,r.useState)({}),[ea,es]=(0,r.useState)([]),[er,el]=(0,r.useState)([]),[en,ei]=(0,r.useState)(""),[eo,ed]=(0,r.useState)(""),[ec,eu]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(""),[ep,eh]=(0,r.useState)(""),[eg,eb]=(0,r.useState)(null),[ej,ey]=(0,r.useState)({days:0,hours:1,minutes:0}),[ef,ev]=(0,r.useState)(null),[eN,ew]=(0,r.useState)(!1),[eD,eC]=(0,r.useState)({name:"",photo:"",socialNetworks:{},customNetworks:[],methods:{delivery:!1,shipping:!1,meetup:!1},deliveryDepartments:[],deliveryPostalCodes:[],meetupDepartments:[],meetupPostalCodes:[],countries:["FR"],location:{country:"FR",department:"",postalCode:""},description:"",referralLink:""}),{data:ek}=(0,d.ZP)(t?"/api/stats":null,$),{data:eE}=(0,d.ZP)(t?"/api/settings":null,$),{data:eS}=(0,d.ZP)(t?"/api/plugs?all=true":null,$),{data:eL}=(0,d.ZP)(t?"/api/applications":null,$);(0,r.useEffect)(()=>{},[]),(0,r.useEffect)(()=>{eE&&(G(eE.welcomeMessage||""),J(eE.infoText||""),Q(eE.miniAppButtonText||"MINI APP CERTIF2PLUG \uD83D\uDD0C"),eE.botSocialNetworks&&el(eE.botSocialNetworks),eE.telegramChannelLink&&ei(eE.telegramChannelLink),eE.telegramChannelId&&ed(eE.telegramChannelId),void 0!==eE.maintenanceMode&&eu(eE.maintenanceMode),void 0!==eE.maintenanceBackgroundImage&&ex(eE.maintenanceBackgroundImage),void 0!==eE.maintenanceLogo&&eh(eE.maintenanceLogo),eE.maintenanceEndTime&&eb(new Date(eE.maintenanceEndTime)),eE.shopSocialNetworks&&eE.shopSocialNetworks.length>0?es(eE.shopSocialNetworks.map((e,t)=>({...e,id:e.id||`network-${t}-${Date.now()}`}))):eE.socialNetworks?(console.log("Fallback sur socialNetworks:",eE.socialNetworks),es(Object.entries(eE.socialNetworks).map(([e,t])=>({id:e,name:t.name||e,emoji:t.emoji||"\uD83D\uDD17",link:t.link||t.url||"",order:t.order||0})))):console.log("Aucun r\xe9seau social trouv\xe9"))},[eE]);let eP=async e=>{e.preventDefault();try{(await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:x})})).ok?(a(!0),o.default.success("Connexion r\xe9ussie !")):o.default.error("Mot de passe incorrect")}catch(e){o.default.error("Erreur de connexion")}},eM=async()=>{try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({welcomeMessage:q,infoText:W,miniAppButtonText:X})})).ok&&(o.default.success("Param\xe8tres sauvegard\xe9s !"),(0,c.j)("/api/settings"))}catch(e){o.default.error("Erreur lors de la sauvegarde")}},eT=async()=>{try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({botSocialNetworks:er})})).ok&&(o.default.success("R\xe9seaux sociaux du bot sauvegard\xe9s !"),(0,c.j)("/api/settings"))}catch(e){o.default.error("Erreur lors de la sauvegarde")}},eA=async()=>{try{let e={...eD,countries:eD.countries,country:eD.countries[0]||"FR",department:eD.location.department,postalCode:eD.location.postalCode,countryFlag:eF(eD.countries[0]||"FR"),socialNetworks:eD.customNetworks?eD.customNetworks.reduce((e,t)=>(e[t.name.toLowerCase()]=t.link,e),{}):{}};(await fetch("/api/admin/plugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(o.default.success("Plug ajout\xe9 avec succ\xe8s !"),j(!1),eC({name:"",photo:"",socialNetworks:{},customNetworks:[],methods:{delivery:!1,shipping:!1,meetup:!1},deliveryDepartments:[],deliveryPostalCodes:[],meetupDepartments:[],meetupPostalCodes:[],countries:["FR"],location:{country:"FR",department:"",postalCode:""},description:"",referralLink:""}),(0,c.j)("/api/plugs?all=true"),(0,c.j)("/api/plugs"),(0,c.j)("/api/stats"))}catch(e){o.default.error("Erreur lors de l'ajout")}},eF=e=>({FR:"\uD83C\uDDEB\uD83C\uDDF7",BE:"\uD83C\uDDE7\uD83C\uDDEA",CH:"\uD83C\uDDE8\uD83C\uDDED",CA:"\uD83C\uDDE8\uD83C\uDDE6",LU:"\uD83C\uDDF1\uD83C\uDDFA"})[e]||"\uD83C\uDF0D",e_=async()=>{try{let e={...y,countryFlag:eF(y.location?.country||y.country||"FR"),socialNetworks:y.customNetworks?y.customNetworks.reduce((e,t)=>(e[t.name.toLowerCase()]=t.link,e),{}):y.socialNetworks||{}},t=await fetch(`/api/plugs/${y._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)o.default.success("Plug mis \xe0 jour avec succ\xe8s !"),j(!1),f(null),(0,c.j)("/api/plugs?all=true"),(0,c.j)("/api/plugs"),(0,c.j)("/api/stats");else{let e=await t.json();o.default.error(e.error||"Erreur lors de la mise \xe0 jour")}}catch(e){console.error("Update error:",e),o.default.error("Erreur lors de la mise \xe0 jour")}},eB=async()=>{try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramChannelLink:en,telegramChannelId:eo})})).ok&&(o.default.success("Configuration Telegram mise \xe0 jour !"),(0,c.j)("/api/settings"))}catch(e){o.default.error("Erreur lors de la mise \xe0 jour")}},eO=async()=>{try{console.log("Sauvegarde des r\xe9seaux sociaux:",ea),(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopSocialNetworks:ea})})).ok?o.default.success("R\xe9seaux sociaux sauvegard\xe9s"):o.default.error("Erreur lors de la sauvegarde")}catch(e){console.error("Erreur:",e),o.default.error("Erreur lors de la sauvegarde")}},eR=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce plug ?"))try{(await fetch(`/api/plugs/${e}`,{method:"DELETE"})).ok&&(o.default.success("Plug supprim\xe9 !"),(0,c.j)("/api/plugs?all=true"),(0,c.j)("/api/plugs"),(0,c.j)("/api/stats"))}catch(e){o.default.error("Erreur lors de la suppression")}},eI=async e=>{try{(await fetch(`/api/applications/${e}/approve`,{method:"POST"})).ok&&(o.default.success("Candidature approuv\xe9e !"),(0,c.j)("/api/applications"),(0,c.j)("/api/plugs?all=true"))}catch(e){o.default.error("Erreur lors de l'approbation")}},ez=async e=>{try{(await fetch(`/api/applications/${e}/reject`,{method:"POST"})).ok&&(o.default.success("Candidature rejet\xe9e"),(0,c.j)("/api/applications"))}catch(e){o.default.error("Erreur lors du rejet")}};if(!t)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-card max-w-md w-full p-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8 text-center gradient-text",children:"Panel Admin"}),(0,s.jsxs)("form",{onSubmit:eP,className:"space-y-4",children:[s.jsx("input",{type:"password",value:x,onChange:e=>p(e.target.value),placeholder:"Mot de passe administrateur",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:border-primary focus:outline-none transition-colors",required:!0,autoFocus:!0}),s.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Se connecter"})]}),(0,s.jsxs)("button",{onClick:()=>e.push("/"),className:"text-gray-400 hover:text-white transition-colors mt-4 flex items-center gap-2 mx-auto",children:[s.jsx(A,{className:"w-4 h-4"}),"Retour \xe0 l'accueil"]})]})});let eU=[{id:"plugs",label:"Plugs",icon:F.Z},{id:"applications",label:"Candidatures",icon:_},{id:"social",label:"R\xe9seaux Sociaux",icon:B},{id:"telegram",label:"Telegram",icon:O.Z},{id:"maintenance",label:"Maintenance",icon:R},{id:"settings",label:"Param\xe8tres",icon:I}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-950",children:[s.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-gray-900/95 backdrop-blur-md border-b border-gray-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[s.jsx("button",{onClick:()=>E(!k),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors","aria-label":"Menu",children:s.jsx(z.Z,{className:"w-6 h-6 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Admin Panel"}),s.jsx("div",{className:"w-10"})," "]})}),k&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-30",onClick:()=>E(!1)}),(0,s.jsxs)("div",{className:"flex relative",children:[(k||V)&&s.jsx("aside",{className:`
                fixed lg:sticky top-0 left-0 h-screen 
                w-72 sm:w-80 lg:w-64 xl:w-72
                bg-gray-900/95 backdrop-blur-md 
                border-r border-gray-800 
                z-40 shadow-2xl
                overflow-y-auto
                ${k?"pt-20 lg:pt-0":""}
              `,children:(0,s.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"hidden lg:block mb-8",children:[s.jsx("h2",{className:"text-2xl xl:text-3xl font-black text-white mb-2",children:"Admin Panel"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Gestion de la boutique"})]}),s.jsx("nav",{className:"space-y-1 sm:space-y-2",children:eU.map(e=>(0,s.jsxs)("button",{onClick:()=>{g(e.id),E(!1)},className:`
                        w-full flex items-center gap-3 
                        px-3 sm:px-4 py-2.5 sm:py-3 
                        rounded-lg sm:rounded-xl 
                        transition-all duration-200 
                        text-sm sm:text-base font-medium
                        ${h===e.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg scale-[1.02]":"bg-gray-800/50 hover:bg-gray-800 text-gray-300 hover:text-white border border-gray-700/50"}
                      `,children:[s.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"truncate text-white",children:e.label})]},e.id))}),(0,s.jsxs)("button",{onClick:()=>{a(!1),p(""),e.push("/")},className:" w-full mt-6 sm:mt-8  px-3 sm:px-4 py-2.5 sm:py-3  bg-red-600/90 hover:bg-red-600  text-white rounded-lg sm:rounded-xl  text-sm sm:text-base font-medium  transition-all duration-200 flex items-center justify-center gap-2  shadow-lg hover:shadow-red-500/20 ",children:[s.jsx(A,{className:"w-4 sm:w-5 h-4 sm:h-5"}),"D\xe9connexion"]})]})}),s.jsx("main",{className:" flex-1  w-full min-h-screen p-4 sm:p-6 lg:p-8  pt-20 lg:pt-8 overflow-x-hidden ",children:(0,s.jsxs)("div",{children:["dashboard"===h&&(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Tableau de bord"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200",children:[s.jsx(U,{className:"w-6 sm:w-8 h-6 sm:h-8 text-primary mb-2"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Utilisateurs"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:ek?.userCount||0})]}),(0,s.jsxs)("div",{className:"glass-card p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200",children:[s.jsx(F.Z,{className:"w-6 sm:w-8 h-6 sm:h-8 text-green-500 mb-2"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Plugs actifs"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:ek?.plugCount||0})]}),(0,s.jsxs)("div",{className:"glass-card p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200",children:[s.jsx(Z,{className:"w-6 sm:w-8 h-6 sm:h-8 text-red-500 mb-2"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Total likes"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:eS?.reduce((e,t)=>e+t.likes,0)||0})]}),(0,s.jsxs)("div",{className:"glass-card p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200",children:[s.jsx(_,{className:"w-6 sm:w-8 h-6 sm:h-8 text-yellow-500 mb-2"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Candidatures"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:eL?.filter(e=>"pending"===e.status).length||0})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white text-white mb-4",children:"\uD83C\uDFC6 Top Plugs"}),s.jsx("div",{className:"space-y-3",children:eS?.slice(0,5).map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-2xl",children:[0===t&&"\uD83E\uDD47",1===t&&"\uD83E\uDD48",2===t&&"\uD83E\uDD49",t>2&&`${t+1}.`]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-400",children:[e.location?.department||e.department||""," • ",e.likes||0," likes"]})]})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[e.referralCount||0," parrainages"]})]},e._id))})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDC65 Top Parrains"}),s.jsx("div",{className:"space-y-3",children:eS?.sort((e,t)=>(t.referralCount||0)-(e.referralCount||0)).slice(0,5).map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-2xl",children:[0===t&&"\uD83E\uDD47",1===t&&"\uD83E\uDD48",2===t&&"\uD83E\uDD49",t>2&&`${t+1}.`]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:e.name}),s.jsx("p",{className:"text-sm text-gray-400",children:e.location?.department||e.department||""})]})]}),s.jsxs("div",{className:"text-sm font-medium text-blue-400",children:[e.referralCount||0," parrainages"]})]},e._id))})]})]}),"plugs"===h&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:justify-between sm:items-center",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Gestion des Plugs"}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"w-full sm:w-auto btn-primary flex items-center justify-center gap-2 py-3",children:[s.jsx(N,{className:"w-5 h-5"}),"Ajouter un plug"]})]}),s.jsx("div",{className:"grid gap-4",children:eS?.map(e=>s.jsxs(l.E.div,{whileHover:{scale:1.01},className:"glass-card p-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[e.photo&&s.jsx("img",{src:e.photo,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-400",children:[e.location?.country||e.country||"FR"," - ",e.location?.department||e.department||""," • ❤️ ",e.likes||0," • \uD83D\uDD17 ",e.referralCount||0]}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[e.methods?.delivery&&s.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:"\uD83D\uDE9A Livraison"}),e.methods?.shipping&&s.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:"\uD83D\uDCEE Envoi"}),e.methods?.meetup&&s.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-1 rounded",children:"\uD83E\uDD1D Meetup"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:()=>{let t=e.referralLink||`https://t.me/${process.env.NEXT_PUBLIC_BOT_USERNAME||"PLGSCRTF_BOT"}?start=plug_${e._id}`;navigator.clipboard.writeText(t),o.default.success("Lien de parrainage copi\xe9 !")},className:"text-sm px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white transition-all flex items-center gap-1",children:"\uD83D\uDD17 Copier lien"}),s.jsx("button",{onClick:()=>{let t={...e};if(t.countries&&0!==t.countries.length||(t.countries=t.country?[t.country]:["FR"]),t.customNetworks||(t.customNetworks=[]),0===t.customNetworks.length&&t.socialNetworks){let e={snap:{name:"Snapchat",emoji:"\uD83D\uDC7B"},instagram:{name:"Instagram",emoji:"\uD83D\uDCF7"},whatsapp:{name:"WhatsApp",emoji:"\uD83D\uDCAC"},telegram:{name:"Telegram",emoji:"✈️"},signal:{name:"Signal",emoji:"\uD83D\uDD12"},threema:{name:"Threema",emoji:"\uD83D\uDD10"},potato:{name:"Potato",emoji:"\uD83E\uDD54"}};Object.entries(t.socialNetworks).forEach(([a,s])=>{s&&e[a]&&t.customNetworks.push({id:Date.now().toString()+Math.random(),name:e[a].name,emoji:e[a].emoji,link:s})}),t.socialNetworks={}}f(t)},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:s.jsx(w,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>eR(e._id),className:"p-2 hover:bg-red-500/20 text-red-500 rounded-lg transition-colors",children:s.jsx(D,{className:"w-5 h-5"})})]})]},e._id))})]}),"applications"===h&&(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Candidatures Vendeurs"}),eL?0===eL.filter(e=>"pending"===e.status).length?s.jsx("div",{className:"glass-card p-8 text-center",children:s.jsx("p",{className:"text-gray-400",children:"Aucune candidature en attente"})}):s.jsx("div",{className:"grid gap-4",children:eL.filter(e=>"pending"===e.status).map(e=>{try{let t={...e,socialNetworks:e.socialNetworks||{primary:[],others:""},methods:e.methods||{},country:e.country||e.location?.country||"",department:e.department||e.location?.department||"",postalCode:e.postalCode||e.location?.postalCode||""};return(0,s.jsxs)(l.E.div,{whileHover:{scale:1.01},className:"glass-card p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold text-white text-lg",children:["@",e.username||"Utilisateur"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Candidature du ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Date inconnue"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{ev(e),ew(!0)},className:"p-2 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 transition-colors",title:"Modifier",children:s.jsx(w,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>eI(e._id),className:"p-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors",title:"Approuver",children:s.jsx(S,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>ez(e._id),className:"p-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 transition-colors",title:"Rejeter",children:s.jsx(P.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(t.photo||t.shopPhoto)&&(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-400 mb-2",children:"\uD83D\uDCF8 Photo de la boutique:"}),(0,s.jsxs)("div",{className:"bg-gray-800 p-2 rounded-lg inline-block",children:[(0,s.jsxs)("p",{className:"text-xs text-gray-400 mb-1",children:["Photo ID: ",t.photo||t.shopPhoto]}),s.jsx("p",{className:"text-xs text-gray-400",children:"La photo est stock\xe9e sur Telegram"})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 font-semibold mb-2",children:"\uD83D\uDCF1 R\xe9seaux sociaux:"}),t.socialNetworks?.primary?.length>0?s.jsx("div",{className:"space-y-2",children:t.socialNetworks.primary.map((e,a)=>{let r=t.socialNetworks?.links?.[e]||"Pas de lien";return(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-800/50 p-2 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-white",children:{snap:"\uD83D\uDC7B Snapchat",instagram:"\uD83D\uDCF8 Instagram",whatsapp:"\uD83D\uDCAC WhatsApp",signal:"\uD83D\uDD10 Signal",threema:"\uD83D\uDD12 Threema",potato:"\uD83E\uDD54 Potato",telegram:"✈️ Telegram"}[e]||e}),s.jsx("span",{className:"text-xs text-gray-400 ml-2 truncate max-w-[200px]",children:r})]},`${e}-${a}`)})}):s.jsx("p",{className:"text-gray-400 italic",children:"Non sp\xe9cifi\xe9"}),t.socialNetworks?.others&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[s.jsx("p",{className:"text-sm text-white",children:s.jsx("span",{className:"text-gray-400 font-medium",children:"Autres r\xe9seaux:"})}),s.jsx("p",{className:"text-sm text-white mt-1",children:t.socialNetworks.others})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 font-semibold mb-2",children:"\uD83D\uDCE6 M\xe9thodes de vente:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[t.methods?.delivery&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-sm",children:"\uD83D\uDE9A Livraison"}),t.deliveryZones&&(0,s.jsxs)("p",{className:"text-sm text-white mt-1 ml-2",children:["Zones: ",t.deliveryZones||"Non sp\xe9cifi\xe9"]})]}),t.methods?.shipping&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm",children:"\uD83D\uDCEE Envoi"}),t.shippingZones&&(0,s.jsxs)("p",{className:"text-sm text-white mt-1 ml-2",children:["Zones: ",t.shippingZones||"Non sp\xe9cifi\xe9"]})]}),t.methods?.meetup&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-sm",children:"\uD83E\uDD1D Meetup"}),t.meetupZones&&(0,s.jsxs)("p",{className:"text-sm text-white mt-1 ml-2",children:["Zones: ",t.meetupZones||"Non sp\xe9cifi\xe9"]})]}),!t.methods?.delivery&&!t.methods?.shipping&&!t.methods?.meetup&&s.jsx("p",{className:"text-gray-400 italic",children:"Aucune m\xe9thode s\xe9lectionn\xe9e"})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 font-semibold mb-2",children:"\uD83D\uDCCD Localisation:"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Pays:"}),s.jsx("p",{className:"text-white",children:t.country||"Non sp\xe9cifi\xe9"})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-gray-400",children:"D\xe9partement:"}),s.jsx("p",{className:"text-white",children:t.department||"Non sp\xe9cifi\xe9"})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-gray-400",children:"Code postal:"}),s.jsx("p",{className:"text-white",children:t.postalCode||"Non sp\xe9cifi\xe9"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 font-semibold mb-2",children:"\uD83D\uDCDD Description:"}),s.jsx("p",{className:"text-sm text-white",children:t.description||s.jsx("span",{className:"text-gray-400 italic",children:"Non sp\xe9cifi\xe9"})})]})]})]},e._id)}catch(t){return console.error("Error rendering application:",e._id,t),s.jsx("div",{className:"glass-card p-6 text-center",children:s.jsx("p",{className:"text-red-400",children:"Erreur lors de l'affichage de cette candidature"})},e._id)}})}):s.jsx("div",{className:"glass-card p-8 text-center",children:s.jsx("p",{className:"text-gray-400",children:"Chargement des candidatures..."})})]}),"social"===h&&(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-3xl font-bold text-white",children:"R\xe9seaux Sociaux de la Boutique"})}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"G\xe9rer les r\xe9seaux sociaux de la boutique"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Configurez les liens vers vos r\xe9seaux sociaux qui seront affich\xe9s sur la page publique."}),s.jsx(C,{networks:ea,onChange:e=>{es(e)}}),(0,s.jsxs)("button",{onClick:eO,className:"w-full mt-6 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[s.jsx(S,{className:"w-5 h-5"}),"Sauvegarder les r\xe9seaux sociaux"]})]})]}),"telegram"===h&&(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Configuration Telegram"}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Canal de v\xe9rification"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Configurez le canal Telegram que les utilisateurs doivent rejoindre pour acc\xe9der au bot."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Lien d'invitation du canal"}),s.jsx("input",{type:"text",value:en,onChange:e=>ei(e.target.value),placeholder:"https://t.me/+RoI-Xzh-ma9iYmY0",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Le lien d'invitation que les utilisateurs utiliseront pour rejoindre le canal"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"ID du canal"}),s.jsx("input",{type:"text",value:eo,onChange:e=>ed(e.target.value),placeholder:"-1002736254394",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"L'ID num\xe9rique du canal (format: -100xxxxxxxxxx)"})]}),(0,s.jsxs)("button",{onClick:eB,className:"w-full mt-6 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center gap-2",children:[s.jsx(S,{className:"w-5 h-5"}),"Sauvegarder la configuration"]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Comment obtenir l'ID du canal ?"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-400",children:[s.jsx("li",{children:"Ajoutez votre bot comme administrateur du canal"}),s.jsx("li",{children:"Envoyez un message dans le canal"}),(0,s.jsxs)("li",{children:["Allez sur : https://api.telegram.org/bot","{","votre_token","}","/getUpdates"]}),(0,s.jsxs)("li",{children:['Cherchez "chat":',"{",'"id":-100xxxxxxxxxx',"}"," dans la r\xe9ponse"]})]})]})]}),"maintenance"===h&&(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mode Maintenance"}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Contr\xf4le de la maintenance"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Activez le mode maintenance pour afficher un message aux utilisateurs du bot et du site web."}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white text-white",children:"\xc9tat actuel"}),(0,s.jsxs)("p",{className:"text-gray-400",children:["Le syst\xe8me est actuellement ",ec?s.jsx("span",{className:"text-red-500 font-bold",children:"en maintenance"}):s.jsx("span",{className:"text-green-500 font-bold",children:"actif"})]})]}),s.jsx("div",{className:`px-4 py-2 rounded-lg font-bold ${ec?"bg-red-600":"bg-green-600"}`,children:ec?"MAINTENANCE":"ACTIF"})]}),!ec&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Dur\xe9e de la maintenance"}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Jours"}),s.jsx("input",{type:"number",min:"0",max:"999",value:ej.days,onChange:e=>ey({...ej,days:Math.max(0,parseInt(e.target.value)||0)}),className:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-center"})]}),s.jsx("div",{className:"pt-5",children:"j"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Heures"}),s.jsx("input",{type:"number",min:"0",max:"999",value:ej.hours,onChange:e=>ey({...ej,hours:Math.max(0,parseInt(e.target.value)||0)}),className:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-center"})]}),s.jsx("div",{className:"pt-5",children:"h"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Minutes"}),s.jsx("input",{type:"number",min:"0",max:"59",value:ej.minutes,onChange:e=>ey({...ej,minutes:Math.max(0,Math.min(59,parseInt(e.target.value)||0))}),className:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-center"})]}),s.jsx("div",{className:"pt-5",children:"min"})]})]}),ec&&eg&&s.jsx(T,{endTime:eg}),s.jsx("button",{onClick:async()=>{try{let e=ec?null:new Date(Date.now()+(1440*ej.days+60*ej.hours+ej.minutes)*6e4);(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maintenanceMode:!ec,maintenanceEndTime:e})})).ok&&(eu(!ec),ec?eb(null):eb(e),document.cookie=`maintenanceMode=${!ec}; path=/; max-age=3600; samesite=lax`,o.default.success(ec?"Mode maintenance d\xe9sactiv\xe9":"Mode maintenance activ\xe9"),(0,c.j)("/api/settings"))}catch(e){o.default.error("Erreur lors de la mise \xe0 jour")}},className:`w-full px-6 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${ec?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,children:ec?(0,s.jsxs)(s.Fragment,{children:[s.jsx(S,{className:"w-5 h-5"}),"D\xe9sactiver la maintenance"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Activer la maintenance"]})})]}),(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white text-white mb-4",children:"\uD83D\uDDBC️ Personnalisation de la page de maintenance"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Logo de maintenance"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:ep,onChange:e=>eh(e.target.value),placeholder:"URL du logo (ex: https://...)",className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"}),ep&&s.jsx("div",{className:"mt-2 p-4 bg-gray-800 rounded-lg",children:s.jsx("img",{src:ep,alt:"Logo de maintenance",className:"max-h-32 mx-auto rounded",onError:e=>{e.currentTarget.src="https://via.placeholder.com/150?text=Logo"}})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Image de fond"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:em,onChange:e=>ex(e.target.value),placeholder:"URL de l'image de fond (ex: https://...)",className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"}),em&&s.jsx("div",{className:"mt-2 p-4 bg-gray-800 rounded-lg",children:s.jsx("img",{src:em,alt:"Image de fond",className:"w-full h-32 object-cover rounded",onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x150?text=Background"}})})]})]})]}),s.jsx("button",{onClick:async()=>{try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maintenanceBackgroundImage:em,maintenanceLogo:ep})})).ok&&(o.default.success("Images de maintenance mises \xe0 jour"),(0,c.j)("/api/settings"))}catch(e){o.default.error("Erreur lors de la mise \xe0 jour")}},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all",children:"Sauvegarder les images"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,s.jsxs)("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Message Bot Telegram"]}),(0,s.jsxs)("p",{className:"text-gray-300 text-sm",children:["\uD83D\uDD27 ",s.jsx("strong",{children:"Maintenance en cours"}),s.jsx("br",{}),s.jsx("br",{}),"Nous sommes bient\xf4t de retour !",s.jsx("br",{}),s.jsx("br",{}),"Cordialement,",s.jsx("br",{}),"CERTIF2PLUG"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Affich\xe9 avec l'image d'accueil configur\xe9e"})]}),(0,s.jsxs)("div",{className:"bg-purple-900/20 border border-purple-600/30 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-purple-400 mb-2 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),"Page Site Web"]}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Une page de maintenance sera affich\xe9e sur tout le site avec un design moderne et professionnel."}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Les administrateurs peuvent toujours acc\xe9der au panel"})]})]}),(0,s.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4 mt-4",children:[s.jsx("h4",{className:"font-semibold text-yellow-400 mb-2",children:"⚠️ Important"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[s.jsx("li",{children:"• Le mode maintenance affecte le bot Telegram ET le site web"}),s.jsx("li",{children:"• Les administrateurs peuvent toujours acc\xe9der au panel admin"}),s.jsx("li",{children:"• Les utilisateurs verront un message de maintenance"}),s.jsx("li",{children:"• N'oubliez pas de d\xe9sactiver la maintenance une fois termin\xe9e"})]})]})]})]}),"settings"===h&&(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Param\xe8tres"}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDD0C Texte du bouton Mini App"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Personnalisez le texte affich\xe9 sur le bouton Mini App en haut du bot Telegram."}),s.jsx("input",{type:"text",value:X,onChange:e=>Q(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:border-primary focus:outline-none transition-colors",placeholder:"Ex: MINI APP CERTIF2PLUG \uD83D\uDD0C"}),s.jsx("button",{onClick:eM,className:"btn-primary mt-4",children:"Enregistrer"})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Message d'accueil du bot"}),s.jsx("textarea",{value:q,onChange:e=>G(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:border-primary focus:outline-none transition-colors",rows:4,placeholder:"Message d'accueil..."}),s.jsx("button",{onClick:eM,className:"btn-primary mt-4",children:"Enregistrer"})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"ℹ️ Texte d'informations"}),s.jsx("p",{className:"text-gray-400 mb-4",children:'Ce texte s\'affiche quand les utilisateurs cliquent sur "ℹ️ Informations" dans le menu du bot.'}),s.jsx("textarea",{value:W,onChange:e=>J(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:border-primary focus:outline-none transition-colors",rows:6,placeholder:"Entrez le texte d'informations..."}),s.jsx("button",{onClick:eM,className:"btn-primary mt-4",children:"Enregistrer"})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Personnalisation visuelle"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83C\uDFA8"})," Fond de la boutique"]}),(0,s.jsxs)("div",{className:"bg-gray-800 border-2 border-gray-600 rounded-xl p-4",children:[s.jsx(v,{currentImage:eE?.backgroundImage,onUpload:async e=>{try{(await fetch("/api/settings/background",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backgroundImage:e})})).ok&&(o.default.success("Fond mis \xe0 jour !"),(0,c.j)("/api/settings"),setTimeout(()=>{window.location.reload()},1e3))}catch(e){o.default.error("Erreur lors de la mise \xe0 jour")}}}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Recommand\xe9 : Image haute r\xe9solution, 1920x1080px minimum"}),eE?.backgroundImage&&(0,s.jsxs)("div",{className:"mt-3",children:[s.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Image actuelle :"}),s.jsx("img",{src:eE.backgroundImage,alt:"Fond actuel",className:"w-32 h-20 object-cover rounded border border-gray-700"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83E\uDD16"})," Image d'accueil du bot"]}),(0,s.jsxs)("div",{className:"bg-gray-800 border-2 border-gray-600 rounded-xl p-4",children:[s.jsx(v,{onUpload:async e=>{try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({welcomeImage:e})})).ok&&o.default.success("Image d'accueil mise \xe0 jour !")}catch(e){o.default.error("Erreur lors de la mise \xe0 jour")}}}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Cette image sera affich\xe9e dans le message d'accueil du bot Telegram"})]})]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"R\xe9seaux sociaux du bot"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Ces liens appara\xeetront en bas du menu principal du bot Telegram"}),(0,s.jsxs)("div",{className:"space-y-4",children:[er?.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[s.jsx("input",{type:"text",value:e.emoji||"",onChange:e=>{let a=[...er];a[t].emoji=e.target.value,el(a)},placeholder:"\uD83D\uDD17",className:"w-16 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-center"}),s.jsx("input",{type:"text",value:e.name||"",onChange:e=>{let a=[...er];a[t].name=e.target.value,el(a)},placeholder:"Nom du r\xe9seau",className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg"}),s.jsx("input",{type:"text",value:e.url||"",onChange:e=>{let a=[...er];a[t].url=e.target.value,el(a)},placeholder:"https://...",className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg"}),s.jsx("input",{type:"number",value:e.order||0,onChange:e=>{let a=[...er];a[t].order=parseInt(e.target.value)||0,el(a)},placeholder:"0",className:"w-20 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-center"}),s.jsx("button",{onClick:()=>{el(er.filter((e,a)=>a!==t))},className:"p-2 text-red-500 hover:bg-red-500/20 rounded-lg transition-colors",children:s.jsx(D,{className:"w-5 h-5"})})]},t)),(0,s.jsxs)("button",{onClick:()=>{el([...er,{name:"",url:"",emoji:"\uD83D\uDD17",order:er.length}])},className:"btn-secondary w-full flex items-center justify-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Ajouter un r\xe9seau social"]}),(0,s.jsxs)("button",{onClick:eT,className:"btn-primary w-full flex items-center justify-center gap-2 mt-4",children:[s.jsx(S,{className:"w-5 h-5"}),"Sauvegarder les r\xe9seaux sociaux du bot"]})]})]})]})]})})]}),s.jsx(n.M,{children:(b||y)&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-gray-900 rounded-3xl w-full max-w-4xl my-8 shadow-2xl",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-t-3xl",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-white",children:y?"✏️ Modifier le plug":"➕ Ajouter un nouveau plug"}),s.jsx("button",{onClick:()=>{j(!1),f(null)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(P.Z,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83D\uDCDD"})," Informations de base"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Nom du plug *"}),s.jsx("input",{type:"text",placeholder:"Ex: PlugsParis",value:y?y.name:eD.name,onChange:e=>y?f({...y,name:e.target.value}):eC({...eD,name:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-all"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Photo du plug"}),(0,s.jsxs)("div",{className:"bg-gray-800 border-2 border-gray-600 rounded-xl p-4",children:[s.jsx(v,{onUpload:e=>y?f({...y,photo:e}):eC({...eD,photo:e})}),(y?.photo||eD.photo)&&s.jsx("div",{className:"mt-4",children:s.jsx("img",{src:y?.photo||eD.photo,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{placeholder:"D\xe9crivez votre service...",value:y?y.description:eD.description,onChange:e=>y?f({...y,description:e.target.value}):eC({...eD,description:e.target.value}),rows:4,className:"w-full px-4 py-3 bg-gray-800 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-all resize-none"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83C\uDF0D"})," Pays et localisation"]}),s.jsx(L,{selectedCountries:y?.countries||eD.countries,selectedDepartments:[],onCountriesChange:e=>{y?f({...y,countries:e}):eC({...eD,countries:e})},onDepartmentsChange:()=>{},showDepartments:!1})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83D\uDE9A"})," M\xe9thodes disponibles"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-gray-800 border-2 border-gray-600 rounded-xl cursor-pointer hover:border-blue-500 transition-all",children:[s.jsx("input",{type:"checkbox",checked:y?.methods?.delivery||eD.methods.delivery,onChange:e=>y?f({...y,methods:{...y.methods||{},delivery:e.target.checked}}):eC({...eD,methods:{...eD.methods,delivery:e.target.checked}}),className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-lg text-white",children:"\uD83D\uDE9A Livraison"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-gray-800 border-2 border-gray-600 rounded-xl cursor-pointer hover:border-green-500 transition-all",children:[s.jsx("input",{type:"checkbox",checked:y?.methods?.shipping||eD.methods.shipping,onChange:e=>y?f({...y,methods:{...y.methods||{},shipping:e.target.checked}}):eC({...eD,methods:{...eD.methods,shipping:e.target.checked}}),className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-lg text-white",children:"\uD83D\uDCE6 Envoi postal"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-gray-800 border-2 border-gray-600 rounded-xl cursor-pointer hover:border-purple-500 transition-all",children:[s.jsx("input",{type:"checkbox",checked:y?.methods?.meetup||eD.methods.meetup,onChange:e=>y?f({...y,methods:{...y.methods||{},meetup:e.target.checked}}):eC({...eD,methods:{...eD.methods,meetup:e.target.checked}}),className:"w-5 h-5 text-purple-600"}),s.jsx("span",{className:"text-lg text-white",children:"\uD83E\uDD1D Meetup"})]})]}),(y?.methods?.delivery||eD.methods.delivery)&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-800 rounded-xl border-2 border-blue-600/30",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"\uD83D\uDE9A S\xe9lectionnez les d\xe9partements o\xf9 vous livrez"}),s.jsx(L,{selectedCountries:y?.countries||eD.countries,selectedDepartments:y?.deliveryDepartments||eD.deliveryDepartments,onCountriesChange:()=>{},onDepartmentsChange:e=>{y?f({...y,deliveryDepartments:e}):eC({...eD,deliveryDepartments:e})},showDepartments:!0}),(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Codes postaux de livraison (optionnel)"}),s.jsx(M,{postalCodes:y?.deliveryPostalCodes||eD.deliveryPostalCodes||[],onChange:e=>{y?f({...y,deliveryPostalCodes:e}):eC({...eD,deliveryPostalCodes:e})},placeholder:"Ex: 75001, 69002..."})]})]}),(y?.methods?.shipping||eD.methods.shipping)&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-800 rounded-xl border-2 border-green-600/30",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"\uD83D\uDCE6 S\xe9lectionnez les pays o\xf9 vous envoyez"}),s.jsx(L,{selectedCountries:y?.shippingCountries||y?.countries||eD.countries,selectedDepartments:[],onCountriesChange:e=>{y?f({...y,shippingCountries:e}):eC({...eD,shippingCountries:e})},onDepartmentsChange:()=>{},showDepartments:!1})]}),(y?.methods?.meetup||eD.methods.meetup)&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-800 rounded-xl border-2 border-purple-600/30",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-4",children:"\uD83E\uDD1D S\xe9lectionnez les zones o\xf9 vous proposez des meetups"}),s.jsx(L,{selectedCountries:y?.countries||eD.countries,selectedDepartments:y?.meetupDepartments||eD.meetupDepartments||[],onCountriesChange:()=>{},onDepartmentsChange:e=>{y?f({...y,meetupDepartments:e}):eC({...eD,meetupDepartments:e})},showDepartments:!0}),(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Codes postaux de meetup (optionnel)"}),s.jsx(M,{postalCodes:y?.meetupPostalCodes||eD.meetupPostalCodes||[],onChange:e=>{y?f({...y,meetupPostalCodes:e}):eC({...eD,meetupPostalCodes:e})},placeholder:"Ex: 75001, 69002..."})]})]})]})]}),s.jsx("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:s.jsx(C,{networks:y?y.customNetworks||[]:eD.customNetworks||[],onChange:e=>{y?f({...y,customNetworks:e}):eC({...eD,customNetworks:e})}})}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83D\uDD17"})," Lien de parrainage"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[y?._id&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Lien de parrainage g\xe9n\xe9r\xe9"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:`https://t.me/${process.env.NEXT_PUBLIC_BOT_USERNAME||"PLGSCRTF_BOT"}?start=plug_${y._id}_${eE?.adminChatIds?.[0]||"admin"}`,className:"flex-1 px-4 py-3 bg-gray-900 border-2 border-gray-600 rounded-xl text-white"}),s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://t.me/${process.env.NEXT_PUBLIC_BOT_USERNAME||"PLGSCRTF_BOT"}?start=plug_${y._id}_${eE?.adminChatIds?.[0]||"admin"}`),o.default.success("Lien copi\xe9 !")},className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl text-white transition-all",children:"\uD83D\uDCCB Copier"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Lien personnalis\xe9 (optionnel)"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"https://t.me/votrebot?start=custom...",value:y?y.referralLink||"":eD.referralLink||"",onChange:e=>y?f({...y,referralLink:e.target.value}):eC({...eD,referralLink:e.target.value}),className:"flex-1 px-4 py-3 bg-gray-800 border-2 border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none transition-all"}),(y?.referralLink||eD.referralLink)&&s.jsx("button",{type:"button",onClick:()=>{let e=y?y.referralLink:eD.referralLink;e&&(navigator.clipboard.writeText(e),o.default.success("Lien personnalis\xe9 copi\xe9 !"))},className:"px-4 py-3 bg-green-600 hover:bg-green-700 rounded-xl text-white transition-all",children:"\uD83D\uDCCB Copier"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Si d\xe9fini, ce lien sera utilis\xe9 \xe0 la place du lien g\xe9n\xe9r\xe9"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:()=>{j(!1),f(null)},className:"flex-1 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-semibold transition-all",children:"Annuler"}),(0,s.jsxs)("button",{onClick:y?e_:eA,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[s.jsx(S,{className:"w-5 h-5"}),y?"Mettre \xe0 jour":"Ajouter le plug"]})]})]})})]})})}),s.jsx(n.M,{children:eN&&ef&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>ew(!1),children:(0,s.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-gray-900 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold mb-6",children:["Modifier la candidature de @",ef.username]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(ef.photo||ef.shopPhoto)&&(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCF8 Photo de la boutique"}),(0,s.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("img",{src:`/api/telegram-photo/${ef.photo||ef.shopPhoto}`,alt:"Photo de la boutique",className:"w-full max-w-md h-64 object-cover rounded-lg mb-3",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling?.classList.remove("hidden")}}),(0,s.jsxs)("div",{className:"hidden bg-gray-800 p-3 rounded text-sm text-gray-400",children:["⚠️ Impossible de charger la photo. ID: ",ef.photo||ef.shopPhoto]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[s.jsx("a",{href:`/api/telegram-photo/${ef.photo||ef.shopPhoto}`,download:`boutique_${ef.username}.jpg`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors",children:"\uD83D\uDCE5 T\xe9l\xe9charger la photo"}),s.jsx("button",{onClick:()=>window.open(`/api/telegram-photo/${ef.photo||ef.shopPhoto}`,"_blank"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm transition-colors",children:"\uD83D\uDD17 Ouvrir dans un nouvel onglet"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCF1 R\xe9seaux sociaux et liens"}),(0,s.jsxs)("div",{className:"space-y-2",children:[ef.socialNetworks?.primary?.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"w-32",children:[{snap:"\uD83D\uDC7B Snapchat",instagram:"\uD83D\uDCF8 Instagram",whatsapp:"\uD83D\uDCAC WhatsApp",signal:"\uD83D\uDD10 Signal",threema:"\uD83D\uDD12 Threema",potato:"\uD83E\uDD54 Potato",telegram:"✈️ Telegram"}[e]||e,":"]}),s.jsx("input",{type:"text",value:ef.socialNetworks?.links?.[e]||"",onChange:t=>{let a={...ef};a.socialNetworks.links||(a.socialNetworks.links={}),a.socialNetworks.links[e]=t.target.value,ev(a)},placeholder:"Lien ou @username",className:"flex-1 px-3 py-1 bg-gray-700 border border-gray-600 rounded"})]},t)),ef.socialNetworks?.others&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Autres r\xe9seaux:"}),s.jsx("textarea",{value:ef.socialNetworks.others,onChange:e=>ev({...ef,socialNetworks:{...ef.socialNetworks,others:e.target.value}}),rows:2,className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCE6 M\xe9thodes de vente et zones"}),(0,s.jsxs)("div",{className:"space-y-3",children:[ef.methods?.delivery&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[s.jsx("input",{type:"checkbox",checked:ef.methods.delivery,onChange:e=>ev({...ef,methods:{...ef.methods,delivery:e.target.checked}})}),"\uD83D\uDE9A Livraison"]}),s.jsx("textarea",{value:ef.deliveryZones||"",onChange:e=>ev({...ef,deliveryZones:e.target.value}),placeholder:"Zones de livraison (d\xe9partements, codes postaux...)",rows:2,className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]}),ef.methods?.shipping&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[s.jsx("input",{type:"checkbox",checked:ef.methods.shipping,onChange:e=>ev({...ef,methods:{...ef.methods,shipping:e.target.checked}})}),"\uD83D\uDCEE Envoi"]}),s.jsx("textarea",{value:ef.shippingZones||"",onChange:e=>ev({...ef,shippingZones:e.target.value}),placeholder:"Zones d'envoi (pays, r\xe9gions...)",rows:2,className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]}),ef.methods?.meetup&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[s.jsx("input",{type:"checkbox",checked:ef.methods.meetup,onChange:e=>ev({...ef,methods:{...ef.methods,meetup:e.target.checked}})}),"\uD83E\uDD1D Meetup"]}),s.jsx("textarea",{value:ef.meetupZones||"",onChange:e=>ev({...ef,meetupZones:e.target.value}),placeholder:"Zones de meetup (villes, quartiers...)",rows:2,className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCCD Localisation principale du vendeur"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Pays"}),s.jsx("input",{type:"text",value:ef.country||"",onChange:e=>ev({...ef,country:e.target.value}),placeholder:"Ex: France",className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"D\xe9partement"}),s.jsx("input",{type:"text",value:ef.department||"",onChange:e=>ev({...ef,department:e.target.value}),placeholder:"Ex: 75",className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Code postal"}),s.jsx("input",{type:"text",value:ef.postalCode||"",onChange:e=>ev({...ef,postalCode:e.target.value}),placeholder:"Ex: 75001",className:"w-full px-3 py-1 bg-gray-700 border border-gray-600 rounded text-sm"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\uD83D\uDCDD Description"}),s.jsx("textarea",{value:ef.description||"",onChange:e=>ev({...ef,description:e.target.value}),rows:4,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded"})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:async()=>{try{(await fetch(`/api/applications/${ef._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ef)})).ok&&(o.default.success("Candidature modifi\xe9e"),(0,c.j)("/api/applications"),ew(!1),ev(null))}catch(e){o.default.error("Erreur lors de la modification")}},className:"flex-1 btn-primary",children:"Sauvegarder"}),s.jsx("button",{onClick:()=>ew(!1),className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Annuler"})]})]})]})})})]})}},968:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let s=(0,a(71481).createProxy)(String.raw`/workspace/web-app/app/config/page.tsx`),{__esModule:r,$$typeof:l}=s,n=s.default},54073:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(77580);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))})},32282:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(77580);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[864,307,750],()=>a(86878));module.exports=s})();
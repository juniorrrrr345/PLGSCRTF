(()=>{var e={};e.id=797,e.ids=[797],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=s(7),r=s(8533),i=s(29377),n=s.n(i),l=s(29799),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,53849)),"/workspace/web-app/app/search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35978)),"/workspace/web-app/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,95046)),"/workspace/web-app/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"]}],d=["/workspace/web-app/app/search/page.tsx"],p="/search/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},76049:(e,t,s)=>{Promise.resolve().then(s.bind(s,26719))},26719:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(54714),r=s(77580),i=s(7297),n=s(72218),l=s(90481),o=s(28695),c=s(16622);let d=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}),p=e=>fetch(e).then(e=>e.json());function u(){let{data:e,mutate:t}=(0,n.ZP)("/api/plugs",p),{data:s}=(0,n.ZP)("/api/settings",p),{data:u}=(0,n.ZP)("/api/locations",p),[m,h]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[v,f]=(0,r.useState)({delivery:!1,shipping:!1,meetup:!1}),[w,j]=(0,r.useState)(null),[N,C]=(0,r.useState)(!1),[k,D]=(0,r.useState)([]),[E,P]=(0,r.useState)(!1),[_,L]=(0,r.useState)([]),[S,q]=(0,r.useState)([]),A=x||y||v.delivery||v.shipping||v.meetup;return(0,r.useEffect)(()=>{if(e){let t=new Set;e.forEach(e=>{e.country&&t.add(e.country),e.countries&&e.countries.forEach(e=>t.add(e)),e.shippingCountries&&e.shippingCountries.forEach(e=>t.add(e))}),L(Array.from(t).map(e=>{let t=s?.countries?.find(t=>t.code===e);return{code:e,name:t?.name||e,flag:t?.flag||""}}).sort((e,t)=>e.name.localeCompare(t.name)));let a=new Set;e.forEach(e=>{(!x||e.country===x||e.countries?.includes(x)||e.shippingCountries?.includes(x))&&(v.delivery||v.shipping||v.meetup?(v.delivery&&e.deliveryDepartments&&e.deliveryDepartments.forEach(e=>a.add(e)),v.meetup&&e.meetupDepartments&&e.meetupDepartments.forEach(e=>a.add(e))):(e.deliveryDepartments&&e.deliveryDepartments.forEach(e=>a.add(e)),e.meetupDepartments&&e.meetupDepartments.forEach(e=>a.add(e)),e.department&&a.add(e.department)))}),q(Array.from(a).sort());let r=e;if(m){let e=m.toLowerCase();r=r.filter(t=>{if(t.name?.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e)||t.countries?.some(t=>{let a=s?.countries?.find(e=>e.code===t);return(a?.name||t).toLowerCase().includes(e)||t.toLowerCase().includes(e)})||t.country?.toLowerCase().includes(e))return!0;let a=s?.countries?.find(e=>e.code===t.country);return!!(a?.name?.toLowerCase().includes(e)||t.deliveryDepartments?.some(t=>t.toLowerCase().includes(e))||t.meetupDepartments?.some(t=>t.toLowerCase().includes(e))||t.deliveryPostalCodes?.some(e=>e.includes(m))||t.meetupPostalCodes?.some(e=>e.includes(m))||t.department?.toLowerCase().includes(e)||t.location?.department?.toLowerCase().includes(e)||t.postalCode?.includes(m)||t.location?.postalCode?.includes(m))})}x&&(r=r.filter(e=>!!(e.countries?.includes(x)||e.shippingCountries?.includes(x))||e.country===x||e.location?.country===x)),y&&(r=r.filter(e=>!!(e.department===y||e.deliveryDepartments?.includes(y)||e.meetupDepartments?.includes(y)))),(v.delivery||v.shipping||v.meetup)&&(r=r.filter(e=>(!v.delivery||!!e.methods?.delivery)&&(!v.shipping||!!e.methods?.shipping)&&(!v.meetup||!!e.methods?.meetup))),D(r)}},[e,m,x,y,v,s]),(0,a.jsxs)("div",{className:"min-h-screen pt-20 px-4",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-4",children:a.jsx("span",{className:"gradient-text",children:"Recherche avanc\xe9e"})}),a.jsx("p",{className:"text-gray-400 text-lg",children:"Trouvez le plug parfait selon vos crit\xe8res"})]}),a.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-3xl mx-auto mb-8",children:(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(c.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Rechercher par nom, ville, d\xe9partement ou code postal...",value:m,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full text-white placeholder-gray-400 focus:outline-none focus:border-primary transition-all"})]}),(0,a.jsxs)("button",{onClick:()=>P(!E),className:`p-4 rounded-full transition-all group flex-shrink-0 ${E?"bg-primary text-white shadow-lg shadow-primary/30 scale-110":A?"bg-blue-600 text-white shadow-lg hover:bg-blue-700 border-2 border-blue-400":"bg-white/20 hover:bg-white/30 text-white border border-white/30 hover:scale-105"}`,title:A?"Filtres actifs":"Filtres avanc\xe9s",children:[a.jsx(d,{className:`w-6 h-6 ${E?"rotate-180":""} transition-transform duration-300`}),A&&!E&&a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})]})}),E&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"glass-card p-6 mb-8 max-w-2xl mx-auto",children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Filtres avanc\xe9s"}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Pays"}),(0,a.jsxs)("select",{value:x,onChange:e=>{g(e.target.value),b("")},className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-primary",children:[a.jsx("option",{value:"",className:"bg-gray-900 text-white",children:"Tous les pays"}),_.map(e=>(0,a.jsxs)("option",{value:e.code,className:"bg-gray-900 text-white",children:[e.flag," ",e.name]},e.code))]})]}),x&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"D\xe9partement"}),(0,a.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-primary",children:[a.jsx("option",{value:"",className:"bg-gray-900 text-white",children:"Tous les d\xe9partements"}),S.map(e=>a.jsx("option",{value:e,className:"bg-gray-900 text-white",children:e},e))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"M\xe9thodes"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:v.delivery,onChange:e=>f({...v,delivery:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-primary focus:ring-primary"}),a.jsx("span",{className:"text-white",children:"\uD83D\uDE9A Livraison"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:v.shipping,onChange:e=>f({...v,shipping:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-secondary focus:ring-secondary"}),a.jsx("span",{className:"text-white",children:"\uD83D\uDCEE Envoi postal"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:v.meetup,onChange:e=>f({...v,meetup:e.target.checked}),className:"w-5 h-5 rounded border-white/20 bg-white/10 text-accent focus:ring-accent"}),a.jsx("span",{className:"text-white",children:"\uD83E\uDD1D Meetup"})]})]})]}),a.jsx("button",{onClick:()=>{g(""),b(""),f({delivery:!1,shipping:!1,meetup:!1})},className:"w-full py-3 bg-white/10 hover:bg-white/20 rounded-lg font-medium transition-all text-white",children:"R\xe9initialiser les filtres"})]}),a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-gray-400",children:[k.length," r\xe9sultat",k.length>1?"s":""," trouv\xe9",k.length>1?"s":""]})}),a.jsx("div",{className:"grid grid-cols-2 gap-4 md:gap-6 lg:gap-8 max-w-6xl mx-auto",children:k.map((e,t)=>a.jsx(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*t},children:a.jsx(l.Z,{plug:e,onClick:()=>{j(e),C(!0)}})},e._id))}),0===k.length&&a.jsx(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),a.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-300",children:"Aucun r\xe9sultat trouv\xe9"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Aucun plug ne correspond \xe0 vos crit\xe8res de recherche."}),m&&a.jsx("p",{className:"text-sm text-gray-500",children:"Essayez avec d'autres mots-cl\xe9s, une ville diff\xe9rente ou un autre d\xe9partement."}),(x||y||Object.values(v).some(e=>e))&&a.jsx("button",{onClick:()=>{h(""),g(""),b(""),f({delivery:!1,shipping:!1,meetup:!1})},className:"mt-4 px-6 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-full transition-all",children:"R\xe9initialiser tous les filtres"})]})})]}),a.jsx(o.Z,{plug:w,isOpen:N,onClose:()=>{C(!1),j(null)}})]})}},53849:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(71481).createProxy)(String.raw`/workspace/web-app/app/search/page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[864,307,750,240],()=>s(84378));module.exports=a})();